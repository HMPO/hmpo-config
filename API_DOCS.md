<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [constructor][1]
    *   [Parameters][2]
    *   [Examples][3]
*   [addFile][4]
    *   [Parameters][5]
    *   [Examples][6]
*   [addString][7]
    *   [Parameters][8]
    *   [Examples][9]
*   [addScript][10]
    *   [Parameters][11]
    *   [Examples][12]
*   [addConfig][13]
    *   [Parameters][14]
    *   [Examples][15]
*   [getPackage][16]
    *   [Examples][17]
*   [getDefaults][18]
    *   [Examples][19]
*   [parseFile][20]
    *   [Parameters][21]
    *   [Examples][22]
*   [loadFile][23]
    *   [Parameters][24]
    *   [Examples][25]
*   [toJSON][26]
    *   [Examples][27]

## constructor

Creates an instance of the Config class.

### Parameters

*   `appRoot` **[string][28]?** The root directory of the application. If not provided, it defaults to the result of `appRootPath.toString()`.

### Examples

```javascript
const Config = require('hmpo-config');
const config = new Config('/path/to/app/root');
```

## addFile

Loads a configuration file and adds its contents to the existing configuration.

### Parameters

*   `path` **[string][28]** The path to the configuration file to be loaded.

### Examples

```javascript
const config = new Config();
config.addFile('config/default.json');
```

Returns **Config** The current Config instance for method chaining.

## addString

Parses a JSON configuration string and adds its contents to the existing configuration.

### Parameters

*   `str` **[string][28]** A JSON string representing configuration data.

### Examples

```javascript
const config = new Config();
config.addString('{ "port": 3000, "debug": true }');
```

Returns **Config** The current Config instance for method chaining.

## addScript

Executes a JavaScript configuration script in a sandboxed context, allowing dynamic configuration.

The script is run using Node.js's `vm.runInNewContext`, with the current config object passed in as the context.
This allows the script to modify the config directly.

⚠️ **Warning:** Use caution when passing untrusted strings to this method, as executing arbitrary code can be a security risk.

### Parameters

*   `str` **[string][28]** A JavaScript string to be executed, which can modify the configuration object.

### Examples

```javascript
const config = new Config();
config.addScript('port = 8080; debug = true;');
// Config now contains { port: 8080, debug: true }
```

Returns **Config** The current Config instance for method chaining.

## addConfig

Merges a plain configuration object into the existing configuration using deep merging.

This method uses a deep merge strategy to combine the new config with the current one,
ensuring nested values are preserved or overwritten appropriately.

### Parameters

*   `config` **[Object][29]** A plain JavaScript object containing configuration properties to merge.

### Examples

```javascript
const config = new Config();
config.addConfig({ port: 3000, db: { host: 'localhost' } });

// Later, add or override parts of the config:
config.addConfig({ db: { port: 5432 } });
// Final config: { port: 3000, db: { host: 'localhost', port: 5432 } }
```

Returns **Config** The current Config instance for method chaining.

## getPackage

Loads and returns the contents of the application's `package.json` file.

This can be useful for accessing metadata such as version, name, or dependencies.

### Examples

```javascript
const config = new Config();
const pkg = config.getPackage();
console.log(pkg.version); // e.g., '1.2.3'
```

Returns **[Object][29]** The parsed contents of the `package.json` file.

## getDefaults

Returns a set of default configuration values.

These defaults include the application's name and version from `package.json`, and the application root path.

### Examples

```javascript
const config = new Config();
const defaults = config.getDefaults();
console.log(defaults.APP_NAME); // e.g., 'my-app'
```

Returns **[Object][29]** An object containing default configuration values:*   `APP_NAME` (string): The name of the application from `package.json`.
*   `APP_VERSION` (string): The version of the application from `package.json`.
*   `APP_ROOT` (string): The root directory of the application.

## parseFile

Parses the provided configuration content based on the file extension.

This method supports parsing YAML, JSON, and JSON5 formats. Depending on the extension,
it will use the appropriate parser to convert the content into a JavaScript object.

### Parameters

*   `content` **[string][28]** The configuration content to be parsed (as a string).
*   `ext` **[string][28]** The file extension that determines the format of the content. Supported extensions include `.yaml`, `.yml`, `.json`, and `.json5`.

### Examples

```javascript
const yamlContent = 'name: my-app\nversion: 1.0.0';
const config = parseFile(yamlContent, '.yaml');
console.log(config.name); // 'my-app'
```

```javascript
const jsonContent = '{"name": "my-app", "version": "1.0.0"}';
const config = parseFile(jsonContent, '.json');
console.log(config.version); // '1.0.0'
```

Returns **[Object][29]** The parsed JavaScript object representation of the configuration.

## loadFile

Loads a configuration file from disk, parses its contents, and caches the result.

The file is read from the specified path, parsed based on its extension (e.g., `.yaml`, `.json`),
and then the parsed content is cached for future use to avoid repeated file reading.
If the file has been previously loaded, the cached data is returned directly.

### Parameters

*   `path` **[string][28]** The path to the configuration file to load. The path is resolved relative to the app root.

### Examples

```javascript
const config = new Config();
const data = config.loadFile('config/settings.json');
console.log(data); // Parsed JSON configuration data
```

*   Throws **[Error][30]** An error if the file cannot be read or parsed, with the error message indicating the file path.

Returns **[Object][29]** The parsed configuration data from the file.

## toJSON

Returns the current configuration as a JavaScript object.

If the configuration has been set, it will return the current config. If not, it falls back to the default configuration.

### Examples

```javascript
const config = new Config();
const currentConfig = config.toJSON();
console.log(currentConfig.APP_NAME); // 'my-app' (default value)
```

Returns **[Object][29]** The current configuration object, or the default configuration if none is set.

[1]: #constructor

[2]: #parameters

[3]: #examples

[4]: #addfile

[5]: #parameters-1

[6]: #examples-1

[7]: #addstring

[8]: #parameters-2

[9]: #examples-2

[10]: #addscript

[11]: #parameters-3

[12]: #examples-3

[13]: #addconfig

[14]: #parameters-4

[15]: #examples-4

[16]: #getpackage

[17]: #examples-5

[18]: #getdefaults

[19]: #examples-6

[20]: #parsefile

[21]: #parameters-5

[22]: #examples-7

[23]: #loadfile

[24]: #parameters-6

[25]: #examples-8

[26]: #tojson

[27]: #examples-9

[28]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[29]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[30]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Error
